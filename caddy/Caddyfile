{
  email hello@jackreid.xyz
}

jackreid.xyz {
  encode gzip

  file_server * {
    root /usr/share/caddy/site
  }

  log {
    output file /etc/caddy/logs/server_log
  }
}

api.jackreid.xyz {
 encode gzip
 log

 reverse_proxy * http://api:3000 {
   health_path /health
   health_interval 5m
 }

 tls /etc/caddy/certs/cert.pem /etc/caddy/certs/privkey.pem {
  #ca https://acme-staging-v02.api.letsencrypt.org/directory
 }
}

prometheus.jackreid.xyz {
 encode gzip
 log

 reverse_proxy http://prometheus:9090 {
   health_path /
   health_interval 5m
 }
}

grafana.jackreid.xyz {
 encode gzip
 log

 reverse_proxy * http://grafana:3000 {
   health_path /
   health_interval 5m
 }
}
