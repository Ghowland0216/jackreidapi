{
  email hello@jackreid.xyz
}

jackreid.xyz {
  encode gzip

  file_server * {
    root /usr/share/caddy/site
  }

  log {
    output file /etc/caddy/logs/server_log
  }

  handle_errors {
    root * /user/share/caddy/site
    rewrite * /{http.error.status_code}.html
    file_server
  }
}

api.jackreid.xyz {
  encode gzip

  reverse_proxy * http://api:3000 {
    health_path /health
    health_interval 5m
  }

  log {
    output file /etc/caddy/logs/server_log
  }
}
